{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhangshuaining/Documents/code/开源/snake_eat_worm/pages/index/index.vue?a49f","webpack:////Users/zhangshuaining/Documents/code/开源/snake_eat_worm/pages/index/index.vue?bd74","webpack:////Users/zhangshuaining/Documents/code/开源/snake_eat_worm/pages/index/index.vue?59ad","webpack:////Users/zhangshuaining/Documents/code/开源/snake_eat_worm/pages/index/index.vue?0d45","uni-app:///pages/index/index.vue","webpack:////Users/zhangshuaining/Documents/code/开源/snake_eat_worm/pages/index/index.vue?4010","webpack:////Users/zhangshuaining/Documents/code/开源/snake_eat_worm/pages/index/index.vue?e087"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2Ct2B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,UADA,EAEA,SAFA,EAGA,oBAHA,EAIA,kBAJA,EAKA,WALA,EAMA,QANA,EAMA;AACA,iBAPA,EAOA;AACA,mBARA,EASA,YATA,EAUA,cAVA,EAUA;AACA,kBAXA,EAWA;AACA,cAZA,EAaA,QAbA,EAcA,0BAdA,EAeA,4BAfA,GAiBA,CAnBA,EAoBA,MApBA,oBAoBA,kBACA,gBADA,CAEA;AACA,uCACA;AACA;AACA,yBACA,MACA;AACA,0BACA,MACA;AACA,2BACA,MACA;AACA,4BACA,MACA;AACA,+BACA,cACA,CAFA,MAEA,CACA,eACA,CACA,MACA;AACA,+BACA,cACA,CAFA,MAEA,CACA,iBACA,CACA,MA1BA,CA4BA,CA7BA,CA8BA,CArDA;AAsDA;AACA,aADA,qBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCANA,CAMA;AACA;AACA;AACA;AACA,KAZA,EAtDA;;AAoEA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAVA;AAWA,oBAXA,4BAWA,CAXA,EAWA;AACA;AACA;AACA;AACA,KAfA;AAgBA,mBAhBA,2BAgBA,CAhBA,EAgBA;AACA,qCADA,CACA;AACA,qCAFA,CAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OARA,MAQA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzCA;AA0CA;AACA,mBA3CA,2BA2CA,CA3CA,EA2CA;AACA;AACA;AACA,KA9CA;AA+CA,UA/CA,oBA+CA;AACA;AACA;AACA,KAlDA;AAmDA,SAnDA,mBAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,iBAFA;AAGA,KA3DA;AA4DA,WA5DA,qBA4DA;AACA;AACA;AACA;AACA;AACA;AACA,KAlEA;AAmEA,SAnEA,mBAmEA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA,OAFA;AAGA;AACA,KA3EA;AA4EA,MA5EA,cA4EA,IA5EA,EA4EA,KA5EA,EA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAxBA;;AA0BA;AACA,KAzGA;AA0GA,cA1GA,sBA0GA,IA1GA,EA0GA,KA1GA,EA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA,aAFA,MAEA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,WAVA,MAUA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA,WAdA,MAcA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA;AACA,gBApDA;;AAsDA;AACA,KAnKA;AAoKA,kBApKA,4BAoKA;AACA;AACA;AACA;AACA,KAxKA;AAyKA,sBAzKA,gCAyKA;AACA;AACA;AACA;AACA,KA7KA;AA8KA,kBA9KA,4BA8KA;AACA;AACA;AACA;AACA;AACA;AACA,KApLA;AAqLA,oBArLA,8BAqLA;AACA;AACA;AACA;AACA;AACA,KA1LA;AA2LA;AACA,oBA5LA,8BA4LA;AACA;AACA;AACA;AACA,KAhMA;AAiMA;AACA,kBAlMA,4BAkMA;AACA;AACA;AACA;AACA,KAtMA;AAuMA,WAvMA,mBAuMA,SAvMA,EAuMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAZA;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA,MAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvPA;AAwPA;AACA,cAzPA,wBAyPA;AACA;AACA;AACA,mBADA;AAEA,iCAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,IAFA;AAGA,OAPA,MAOA;AACA;AACA;AACA;AACA;AACA,KAhRA;AAiRA,UAjRA,oBAiRA;AACA;AACA;AACA,KApRA;AAqRA,YArRA,sBAqRA;AACA;AACA;AACA,KAxRA;AAyRA,YAzRA,sBAyRA;AACA;AACA;AACA,KA5RA;AA6RA,aA7RA,uBA6RA;AACA;AACA;AACA,KAhSA;AAiSA,aAjSA,qBAiSA,SAjSA,EAiSA,IAjSA,EAiSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBApBA;;AAsBA;AACA,KAjUA,EApEA,E;;;;;;;;;;;;;ACvDA;AAAA;AAAA;AAAA;AAAqsC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACAztC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.blocks, function(x, i) {\n    var $orig = _vm.__get_orig(x)\n\n    var m0 = _vm.bg(x, i)\n    var m1 = _vm.calcRotate(x, i)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view ref=\"body\" class=\"content\" @keyup.left=\"bindLeft\" @keyup.right=\"bindRight\" @keyup.down=\"bindDown\"\r\n\t\t@keyup.up=\"bindUp\" @touchstart=\"handleTouchStart\" @touchmove=\"handleTouchMove\">\r\n\t\t<view>蛇蛇目前：{{snakes.length}}米长</view>\r\n\t\t<view class=\"boom-countdown\" v-show=\"boom\">\r\n\t\t\t虫虫还有<text class=\"num\">{{boomCount}}</text>秒爆炸！<text class=\"tip\">（请在爆炸前吃掉它）</text>\r\n\t\t</view>\r\n\t\t<view class=\"game-field\">\r\n\t\t\t<view class=\"block\" :style=\"{'background-image': bg(x, i), transform: `rotate(${calcRotate(x,i)}deg)`}\"\r\n\t\t\t\tv-for=\"(x, i) in blocks\" :key=\"i\">\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-show=\"!started || ended\" class=\"game-board-wrap\">\r\n\t\t\t<view v-show=\"!started\" class=\"game-board\">\r\n\t\t\t\t<view class=\"title\">选择游戏难度</view>\r\n\t\t\t\t<radio-group name=\"radio\" @change=\"bindLevelChange\">\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t<radio value=\"1\" :checked=\"level==1\" /><text>简单模式</text>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t<radio value=\"2\" :checked=\"level==2\" /><text>正常模式</text>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t<radio value=\"3\" :checked=\"level==3\" /><text>困难模式</text>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t<radio value=\"4\" :checked=\"level==4\" /><text>地狱模式</text>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</radio-group>\r\n\t\t\t\t<button type=\"primary\" @click=\"start\">开始游戏</button>\r\n\t\t\t</view>\r\n\t\t\t<view v-show=\"ended\" class=\"settle-board\">\r\n\t\t\t\t<view class=\"title\">游戏结束</view>\r\n\t\t\t\t<view class=\"result\">您的蛇蛇达到了{{snakes.length}}米</view>\r\n\t\t\t\t<view class=\"btns\">\r\n\t\t\t\t\t<button type=\"primary\" @click=\"reStart\">再次挑战</button>\r\n\t\t\t\t\t<button type=\"primary\" plain @click=\"rePick\">重选难度</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport worm from \"../../static/images/worm.png\";\r\n\timport snakeBody from \"../../static/images/snake_body.png\";\r\n\timport snakeHead from \"../../static/images/snake_head.png\";\r\n\timport snakeTail from \"../../static/images/snake_tail.png\";\r\n\timport polluteBlock from \"../../static/images/pollute.png\";\r\n\timport wormBoom from \"../../static/images/worm_4.png\";\r\n\timport explodeVoice from \"../../static/audio/explode.mp3\";\r\n\timport eatVoice from \"../../static/audio/eat.mp3\";\r\n\timport bgm from '../../static/audio/bgm.mp3';\r\n\timport click from '../../static/audio/click.mp3';\r\n\timport clock from '../../static/audio/clock.mp3';\r\n\timport die from '../../static/audio/die.mp3';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tblocks: [],\r\n\t\t\t\tworms: [],\r\n\t\t\t\tsnakes: [0, 1, 2, 3],\r\n\t\t\t\tdirection: \"right\",\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tlevel: 1, // 游戏难度\r\n\t\t\t\tboom: false, // 是否生成会爆炸的虫子\r\n\t\t\t\tboomCount: 10,\r\n\t\t\t\tpollutes: [],\r\n\t\t\t\tstarted: false, // 游戏开始了\r\n\t\t\t\tended: false, // 游戏结束了\r\n\t\t\t\tlastX: 0,\r\n\t\t\t\tlastY: 0,\r\n\t\t\t\tbgmInnerAudioContext: null,\r\n\t\t\t\tclockInnerAudioContext: null,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.initGame();\r\n\t\t\t// 绑定键盘事件\r\n\t\t\tdocument.onkeydown = (e) => {\r\n\t\t\t\tswitch (e.keyCode) { // 获取当前按下键盘键的编码\r\n\t\t\t\t\tcase 8: // 按下退格键\r\n\t\t\t\t\t\tthis.rePick();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 13: // 按下回车键\r\n\t\t\t\t\t\tthis.reStart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 37: // 按下左箭头键\r\n\t\t\t\t\t\tthis.bindLeft();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 39: // 按下右箭头键\r\n\t\t\t\t\t\tthis.bindRight();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 38: // 按下上箭头键\r\n\t\t\t\t\t\tif (!this.started) {\r\n\t\t\t\t\t\t\tthis.level--;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.bindUp();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 40: // 按下下箭头键\r\n\t\t\t\t\t\tif (!this.started) {\r\n\t\t\t\t\t\t\tthis.level++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.bindDown();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tboomCount(val) {\r\n\t\t\t\tif (val === 0) {\r\n\t\t\t\t\t// 超过爆炸时间还没吃到,则将虫子格子变成被污染的土地,并且重置爆炸状态,同时生成一只新的虫子:\r\n\t\t\t\t\tthis.handleExplodeVoice()\r\n\t\t\t\t\tthis.clockInnerAudioContext.stop()\r\n\t\t\t\t\tconst boomWorm = this.worms.pop();\r\n\t\t\t\t\tthis.pollutes.push(boomWorm);\r\n\t\t\t\t\tthis.blocks[boomWorm] = 3; // 被污染的地方我们用3表示\r\n\t\t\t\t\tthis.boom = false;\r\n\t\t\t\t\tthis.worms.push(this.createWorm());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinitGame() {\r\n\t\t\t\tthis.blocks = new Array(100).fill(0);\r\n\t\t\t\tthis.worms = [Math.floor(Math.random() * 96) + 4];\r\n\t\t\t\tthis.snakes = [0, 1, 2, 3];\r\n\t\t\t\tthis.pollutes = [];\r\n\t\t\t\tthis.direction = \"right\";\r\n\t\t\t\tthis.timer = null;\r\n\t\t\t\tthis.boomTimer = null;\r\n\t\t\t\tthis.paint();\r\n\t\t\t},\r\n\t\t\thandleTouchStart(e) {\r\n\t\t\t\t// 手指开始位置\r\n\t\t\t\tthis.lastX = e.touches[0].pageX;\r\n\t\t\t\tthis.lastY = e.touches[0].pageY;\r\n\t\t\t},\r\n\t\t\thandleTouchMove(e) {\r\n\t\t\t\tlet lastX = e.touches[0].pageX; // 移动的x轴坐标\r\n\t\t\t\tlet lastY = e.touches[0].pageY; // 移动的y轴坐标\r\n\r\n\t\t\t\tlet touchX = lastX - this.lastX;\r\n\t\t\t\tlet touchY = lastY - this.lastY\r\n\t\t\t\tif (Math.abs(touchX) > Math.abs(touchY)) {\r\n\t\t\t\t\tif (touchX < 0) {\r\n\t\t\t\t\t\tif (this.direction === \"right\") return;\r\n\t\t\t\t\t\tthis.direction = 'left'\r\n\t\t\t\t\t} else if (touchX > 0) {\r\n\t\t\t\t\t\tif (this.direction === \"left\") return;\r\n\t\t\t\t\t\tthis.direction = 'right'\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (touchY < 0) {\r\n\t\t\t\t\t\tif (this.direction === \"down\") return;\r\n\t\t\t\t\t\tthis.direction = 'up'\r\n\t\t\t\t\t} else if (touchY > 0) {\r\n\t\t\t\t\t\tif (this.direction === \"up\") return;\r\n\t\t\t\t\t\tthis.direction = 'down'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastX = lastX;\r\n\t\t\t\tthis.lastY = lastY;\r\n\t\t\t},\r\n\t\t\t// 难度选择\r\n\t\t\tbindLevelChange(e) {\r\n\t\t\t\tthis.level = e.detail.value;\r\n\t\t\t\tthis.handleClickVoice();\r\n\t\t\t},\r\n\t\t\trePick() {\r\n\t\t\t\tthis.started = false;\r\n\t\t\t\tthis.ended = false;\r\n\t\t\t},\r\n\t\t\tstart() {\r\n\t\t\t\tthis.started = true;\r\n\t\t\t\tthis.initGame();\r\n\t\t\t\tthis.handleClickVoice()\r\n\t\t\t\tthis.handleBgmVoice()\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\tthis.toWards(this.direction);\r\n\t\t\t\t}, 1000 / this.level);\r\n\t\t\t},\r\n\t\t\treStart() {\r\n\t\t\t\tthis.ended = false;\r\n\t\t\t\tif (this.timer) {\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t}\r\n\t\t\t\tthis.start();\r\n\t\t\t},\r\n\t\t\tpaint() {\r\n\t\t\t\tthis.worms.forEach((x) => {\r\n\t\t\t\t\tthis.blocks[x] = 1;\r\n\t\t\t\t});\r\n\t\t\t\tthis.snakes.forEach((x) => {\r\n\t\t\t\t\tthis.blocks[x] = 2;\r\n\t\t\t\t});\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t},\r\n\t\t\tbg(type, index) {\r\n\t\t\t\tlet bg = \"\";\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 0: // 地板\r\n\t\t\t\t\t\tbg = \"unset\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1: // 虫子\r\n\t\t\t\t\t\tif (this.boom) {\r\n\t\t\t\t\t\t\tbg = `url(${wormBoom})`;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbg = `url(${worm})`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2: // 蛇\r\n\t\t\t\t\t\tlet head = this.snakes[this.snakes.length - 1];\r\n\t\t\t\t\t\tlet tail = this.snakes[0];\r\n\t\t\t\t\t\tif (index === head) {\r\n\t\t\t\t\t\t\tbg = `url(${snakeHead})`;\r\n\t\t\t\t\t\t} else if (index === tail) {\r\n\t\t\t\t\t\t\tbg = `url(${snakeTail})`;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbg = `url(${snakeBody})`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3: // 污染的地块\r\n\t\t\t\t\t\tbg = `url(${polluteBlock})`;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn bg;\r\n\t\t\t},\r\n\t\t\tcalcRotate(type, index) {\r\n\t\t\t\tlet rotate = 0;\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 0: // 地板\r\n\t\t\t\t\t\trotate = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1: // 虫子\r\n\t\t\t\t\t\trotate = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2: // 蛇\r\n\t\t\t\t\t\tlet length = this.snakes.length;\r\n\t\t\t\t\t\tlet head = this.snakes[length - 1];\r\n\t\t\t\t\t\tlet tail = this.snakes[0];\r\n\t\t\t\t\t\tlet tailPre = this.snakes[1];\r\n\t\t\t\t\t\tlet bodyPre = this.snakes[this.snakes.indexOf(index) + 1];\r\n\t\t\t\t\t\tif (index === head) {\r\n\t\t\t\t\t\t\tif (this.direction === \"right\") {\r\n\t\t\t\t\t\t\t\trotate = 90;\r\n\t\t\t\t\t\t\t} else if (this.direction === \"down\") {\r\n\t\t\t\t\t\t\t\trotate = 180;\r\n\t\t\t\t\t\t\t} else if (this.direction === \"left\") {\r\n\t\t\t\t\t\t\t\trotate = 270;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trotate = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (index === tail) {\r\n\t\t\t\t\t\t\tif (tailPre - 1 === tail) {\r\n\t\t\t\t\t\t\t\t// 向右走的\r\n\t\t\t\t\t\t\t\trotate = 90;\r\n\t\t\t\t\t\t\t} else if (tailPre - 10 === tail) {\r\n\t\t\t\t\t\t\t\t// 向下走的\r\n\t\t\t\t\t\t\t\trotate = 180;\r\n\t\t\t\t\t\t\t} else if (tailPre + 1 === tail) {\r\n\t\t\t\t\t\t\t\t// 向左走的\r\n\t\t\t\t\t\t\t\trotate = 270;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 向上走的\r\n\t\t\t\t\t\t\t\trotate = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (bodyPre - 1 === index) {\r\n\t\t\t\t\t\t\t\t// 向右走的\r\n\t\t\t\t\t\t\t\trotate = 90;\r\n\t\t\t\t\t\t\t} else if (bodyPre - 10 === index) {\r\n\t\t\t\t\t\t\t\t// 向下走的\r\n\t\t\t\t\t\t\t\trotate = 180;\r\n\t\t\t\t\t\t\t} else if (bodyPre + 1 === index) {\r\n\t\t\t\t\t\t\t\t// 向左走的\r\n\t\t\t\t\t\t\t\trotate = 270;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 向上走的\r\n\t\t\t\t\t\t\t\trotate = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn rotate;\r\n\t\t\t},\r\n\t\t\thandleEatVoice() {\r\n\t\t\t\tconst innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = eatVoice;\r\n\t\t\t},\r\n\t\t\thandleExplodeVoice() {\r\n\t\t\t\tconst innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = explodeVoice;\r\n\t\t\t},\r\n\t\t\thandleBgmVoice() {\r\n\t\t\t\t// 背景音乐\r\n\t\t\t\tthis.bgmInnerAudioContext = uni.createInnerAudioContext()\r\n\t\t\t\tthis.bgmInnerAudioContext.autoplay = true;\r\n\t\t\t\tthis.bgmInnerAudioContext.src = bgm;\r\n\t\t\t\tthis.bgmInnerAudioContext.loop = true;\r\n\t\t\t},\r\n\t\t\thandleClickVoice() {\r\n\t\t\t\t// 按钮点击的声音\r\n\t\t\t\tconst innerAudioContext = uni.createInnerAudioContext()\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = click;\r\n\t\t\t},\r\n\t\t\t// 爆炸倒计时的声音\r\n\t\t\thandleClockVoice() {\r\n\t\t\t\tthis.clockInnerAudioContext = uni.createInnerAudioContext()\r\n\t\t\t\tthis.clockInnerAudioContext.autoplay = true;\r\n\t\t\t\tthis.clockInnerAudioContext.src = clock;\r\n\t\t\t},\r\n\t\t\t// 蛇挂掉了\r\n\t\t\thandleDieVoice() {\r\n\t\t\t\tconst innerAudioContext = uni.createInnerAudioContext()\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = die;\r\n\t\t\t},\r\n\t\t\ttoWards(direction) {\r\n\t\t\t\tif (this.snakes.length === 100) {\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet head = this.snakes[this.snakes.length - 1];\r\n\t\t\t\tlet tail = this.snakes[0];\r\n\t\t\t\tlet next;\r\n\t\t\t\tswitch (direction) {\r\n\t\t\t\t\tcase \"up\":\r\n\t\t\t\t\t\tnext = head - 10;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"down\":\r\n\t\t\t\t\t\tnext = head + 10;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\tnext = head - 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tnext = head + 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet gameover = this.checkGame(direction, next);\r\n\t\t\t\tif (gameover) {\r\n\t\t\t\t\tthis.ended = true;\r\n\t\t\t\t\tthis.handleDieVoice()\r\n\t\t\t\t\tthis.bgmInnerAudioContext.pause()\r\n\t\t\t\t\tthis.clockInnerAudioContext && this.clockInnerAudioContext.stop()\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\tclearInterval(this.boomTimer);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 游戏没结束\r\n\t\t\t\t\tthis.snakes.push(next);\r\n\t\t\t\t\tlet nextType = this.blocks[next];\r\n\t\t\t\t\tthis.blocks[next] = 2;\r\n\t\t\t\t\t// 如果是空白格\r\n\t\t\t\t\tif (nextType === 0) {\r\n\t\t\t\t\t\tthis.snakes.shift();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果是虫子格\r\n\t\t\t\t\t\tthis.handleEatVoice()\r\n\t\t\t\t\t\tthis.worms = this.worms.filter((x) => x !== next);\r\n\t\t\t\t\t\tlet nextWorm = this.createWorm();\r\n\t\t\t\t\t\tthis.worms.push(nextWorm);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.blocks[tail] = 0;\r\n\t\t\t\t\tthis.paint();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 生成下一只虫子\r\n\t\t\tcreateWorm() {\r\n\t\t\t\tthis.boom = false;\r\n\t\t\t\tlet blocks = Array.from({\r\n\t\t\t\t\tlength: 100\r\n\t\t\t\t}, (v, k) => k);\r\n\t\t\t\t// 在不是蛇和被污染的地方生成虫子\r\n\t\t\t\tlet restBlocks = blocks.filter(x => this.snakes.indexOf(x) < 0 && this.pollutes.indexOf(x) < 0);\r\n\t\t\t\tlet worm = restBlocks[Math.floor(Math.random() * restBlocks.length)];\r\n\t\t\t\t// 根据游戏难度,概率产出会爆炸的虫子:\r\n\t\t\t\tthis.boom = Math.random() / this.level < 0.05;\r\n\t\t\t\t// 生成了新虫子说明吃到了那个爆炸的虫子，重置下爆炸\r\n\t\t\t\tif (this.boom) {\r\n\t\t\t\t\tthis.boomCount = 10;\r\n\t\t\t\t\tthis.boomTimer && clearInterval(this.boomTimer);\r\n\t\t\t\t\tthis.handleClockVoice()\r\n\t\t\t\t\tthis.boomTimer = setInterval(() => {\r\n\t\t\t\t\t\tthis.boomCount--;\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.clockInnerAudioContext && this.clockInnerAudioContext.stop()\r\n\t\t\t\t\tclearInterval(this.boomTimer);\r\n\t\t\t\t}\r\n\t\t\t\treturn worm;\r\n\t\t\t},\r\n\t\t\tbindUp() {\r\n\t\t\t\tif (this.direction === \"down\") return;\r\n\t\t\t\tthis.direction = \"up\";\r\n\t\t\t},\r\n\t\t\tbindDown() {\r\n\t\t\t\tif (this.direction === \"up\") return;\r\n\t\t\t\tthis.direction = \"down\";\r\n\t\t\t},\r\n\t\t\tbindLeft() {\r\n\t\t\t\tif (this.direction === \"right\") return;\r\n\t\t\t\tthis.direction = \"left\";\r\n\t\t\t},\r\n\t\t\tbindRight() {\r\n\t\t\t\tif (this.direction === \"left\") return;\r\n\t\t\t\tthis.direction = \"right\";\r\n\t\t\t},\r\n\t\t\tcheckGame(direction, next) {\r\n\t\t\t\tlet gameover = false;\r\n\t\t\t\tlet isSnake = this.snakes.indexOf(next) > -1;\r\n\t\t\t\tlet isPollute = this.pollutes.indexOf(next) > -1;\r\n\t\t\t\t// 撞到蛇和被污染的地块游戏结束\r\n\t\t\t\tif (isSnake || isPollute) {\r\n\t\t\t\t\tgameover = true;\r\n\t\t\t\t}\r\n\t\t\t\t// 撞到边界游戏结束\r\n\t\t\t\tswitch (direction) {\r\n\t\t\t\t\tcase \"up\":\r\n\t\t\t\t\t\tif (next < 0) {\r\n\t\t\t\t\t\t\tgameover = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"down\":\r\n\t\t\t\t\t\tif (next >= 100) {\r\n\t\t\t\t\t\t\tgameover = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\tif (next % 10 === 9) {\r\n\t\t\t\t\t\t\tgameover = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tif (next % 10 === 0) {\r\n\t\t\t\t\t\t\tgameover = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn gameover;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\theight: calc(100vh - 150upx);\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 30upx 0;\r\n\t}\r\n\r\n\t.game-field {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin-top: 100upx;\r\n\t}\r\n\r\n\t.block {\r\n\t\twidth: 10vw;\r\n\t\theight: 10vw;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: rgb(232, 235, 178);\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-position: center;\r\n\t\tbackground-size: cover;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t\twidth: 50%;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.action-field {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\twidth: 100%;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.game-board-wrap {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: rgba(0, 0, 0, .5);\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.game-board {\r\n\t\twidth: 600upx;\r\n\t\theight: 600upx;\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\tmargin-top: -300upx;\r\n\t\tmargin-left: -300upx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 30upx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.settle-board {\r\n\t\twidth: 600upx;\r\n\t\theight: 400upx;\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\tmargin-top: -300upx;\r\n\t\tmargin-left: -300upx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 30upx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 50upx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-top: 40upx;\r\n\t}\r\n\r\n\t.label {\r\n\t\tdisplay: block;\r\n\t\tmargin: 30upx;\r\n\t}\r\n\r\n\t.result {\r\n\t\tmargin: 40upx 0;\r\n\t}\r\n\r\n\t.btns {\r\n\t\tdisplay: flex;\r\n\t\twidth: 500upx;\r\n\t}\r\n\r\n\t.boom-countdown {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t\ttop: 60upx;\r\n\t}\r\n\r\n\t.num {\r\n\t\tfont-size: 60upx;\r\n\t\tcolor: #007AFF;\r\n\t}\r\n\r\n\t.tip {\r\n\t\tfont-size: 20upx;\r\n\t\tcolor: #f8b62a;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1650608525022\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}